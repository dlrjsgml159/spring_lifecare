<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 	  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 	  
<mapper namespace="com.spring.lifecare.persistence.UserDAO">
	<select id = "selectUser" parameterType="String" resultType = "java.util.Map">
      SELECT customer_id as username, customer_pw as password, customer_name as name, enabled, authority, customer_echeck
        FROM customer
       WHERE customer_id=#{userid}  
   </select>
   
   <select id = "kakaoFindId" parameterType="String" resultType = "java.util.Map">
      SELECT customer_id as username, customer_name as name, enabled, authority
        FROM customer
       WHERE kakaoId=#{kakaoId}  
   </select>
   
   <!--  아이디 중복확인 -->
   <select id ="idCheck" parameterType="String" resultType="int" >
     SELECT count(*)  FROM customer WHERE customer_id=#{customer_id} 
   </select>
   <!-- 핸드폰 번호 중복확인  -->
   <select id ="phoneCheck" parameterType="String" resultType="int" >
     SELECT count(*)  FROM customer WHERE customer_phone=#{customer_phone} 
   </select>
   <!-- 이메일 중복확인 -->
   <select id ="emailCheck" parameterType="String" resultType="int" >
     SELECT count(*)  FROM customer WHERE customer_email=#{customer_email} 
   </select>
   <!-- 회원가입 처리 -->
   <insert id ="insertMember" parameterType="com.spring.lifecare.vo.CustomerVO">
     INSERT INTO customer (customer_id, customer_pw, customer_name, customer_phone, customer_email) VALUES (#{customer_id}, #{customer_pw},#{customer_name},#{customer_phone},#{customer_email})
   </insert>
   <!-- 이메일 인증 후 로그인 처리  -->
   <update id="approvalMember" parameterType="String">
	  UPDATE customer set customer_echeck = 1 WHERE customer_email = #{customer_email} 
   </update>   
   <!-- 아이디 찾기  -->
   <select id ="findId"  parameterType="String" resultType="String">
      SELECT customer_id FROM customer WHERE customer_phone=#{customer_phone}
   </select>
   
   <!-- 의사 아이디 중복확인 -->
   <select id ="CheckId" parameterType="String" resultType="int" >
     SELECT count(*)  FROM doctor WHERE doctor_id=#{doctor_id} 
   </select>
   <!-- 의사 핸드폰 번호 중복확인  -->
   <select id ="CheckPhone" parameterType="String" resultType="int" >
     SELECT count(*)  FROM doctor WHERE doctor_phone=#{doctor_phone} 
   </select>
   <!-- 의사 이메일 중복확인 -->
   <select id ="CheckEmail" parameterType="String" resultType="int" >
     SELECT count(*)  FROM doctor WHERE doctor_email=#{doctor_email} 
   </select>
   
   <!-- 의사 면허번호 중복확인 -->
   <select id ="CheckNum" parameterType="String" resultType="int" >
     SELECT count(*)  FROM doctor WHERE doctor_num=#{doctor_num} 
   </select>
   
</mapper>  	  

